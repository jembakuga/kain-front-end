{"ast":null,"code":"import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n * @hidden\n */\n\nvar ColumnMenu =\n/** @class */\nfunction () {\n  function ColumnMenu(parent, serviceLocator) {\n    this.defaultItems = {};\n    this.localeText = this.setLocaleKey();\n    this.disableItems = [];\n    this.hiddenItems = [];\n    this.isOpen = false; // default class names\n\n    this.GROUP = 'e-icon-group';\n    this.UNGROUP = 'e-icon-ungroup';\n    this.ASCENDING = 'e-icon-ascending';\n    this.DESCENDING = 'e-icon-descending';\n    this.ROOT = 'e-columnmenu';\n    this.FILTER = 'e-icon-filter';\n    this.POP = 'e-filter-popup';\n    this.WRAP = 'e-col-menu';\n    this.CHOOSER = '_chooser_';\n    this.parent = parent;\n    this.gridID = parent.element.id;\n    this.serviceLocator = serviceLocator;\n    this.addEventListener();\n  }\n\n  ColumnMenu.prototype.wireEvents = function () {\n    var _this = this;\n\n    this.getColumnMenuHandlers().forEach(function (ele) {\n      EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n    });\n  };\n\n  ColumnMenu.prototype.unwireEvents = function () {\n    var _this = this;\n\n    this.getColumnMenuHandlers().forEach(function (ele) {\n      EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n    });\n  };\n  /**\n   * To destroy the resize\n   * @return {void}\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.destroy = function () {\n    var gridElement = this.parent.element;\n\n    if (!gridElement || !gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent')) {\n      return;\n    }\n\n    this.columnMenu.destroy();\n    this.removeEventListener();\n    this.unwireFilterEvents();\n    this.unwireEvents();\n    remove(this.element);\n  };\n\n  ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n    if (e.target.classList.contains('e-columnmenu')) {\n      this.columnMenu.items = this.getItems();\n      this.columnMenu.dataBind();\n\n      if (this.isOpen && this.headerCell !== this.getHeaderCell(e) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n        this.columnMenu.close();\n        this.openColumnMenu(e);\n      } else if (!this.isOpen) {\n        this.openColumnMenu(e);\n      } else {\n        this.columnMenu.close();\n      }\n    }\n  };\n  /** @hidden */\n\n\n  ColumnMenu.prototype.openColumnMenuByField = function (field) {\n    this.openColumnMenu({\n      target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu')\n    });\n  };\n\n  ColumnMenu.prototype.openColumnMenu = function (e) {\n    var pos = {\n      top: 0,\n      left: 0\n    };\n    this.element.style.cssText = 'display:block;visibility:hidden';\n    var elePos = this.element.getBoundingClientRect();\n    this.element.style.cssText = 'display:none;visibility:visible';\n    this.headerCell = this.getHeaderCell(e);\n\n    if (Browser.isDevice) {\n      pos.top = window.innerHeight / 2 - elePos.height / 2;\n      pos.left = window.innerWidth / 2 - elePos.width / 2;\n    } else {\n      if (this.parent.enableRtl) {\n        pos = calculatePosition(this.headerCell, 'left', 'bottom');\n      } else {\n        pos = calculatePosition(this.headerCell, 'right', 'bottom');\n        pos.left -= elePos.width;\n      }\n    }\n\n    this.columnMenu.open(pos.top, pos.left);\n\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n\n    applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n  };\n\n  ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n    this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n  };\n\n  ColumnMenu.prototype.getColumnMenuHandlers = function () {\n    return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.headerRefreshed, this.wireEvents, this);\n    this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n    this.parent.on(events.initialEnd, this.render, this);\n\n    if (this.isFilterItemAdded()) {\n      this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n    }\n\n    this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    this.parent.on(events.keyPressed, this.keyPressHandler, this);\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.headerRefreshed, this.unwireEvents);\n    this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n    this.parent.off(events.initialEnd, this.render);\n\n    if (this.isFilterItemAdded()) {\n      this.parent.off(events.filterDialogCreated, this.filterPosition);\n    }\n\n    this.parent.off(events.click, this.columnMenuHandlerClick);\n    this.parent.off(events.keyPressed, this.keyPressHandler);\n  };\n\n  ColumnMenu.prototype.keyPressHandler = function (e) {\n    var gObj = this.parent;\n\n    if (e.action === 'altDownArrow') {\n      var element = gObj.focusModule.currentInfo.element;\n\n      if (element && element.classList.contains('e-headercell')) {\n        var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n        this.openColumnMenuByField(column.field);\n      }\n    }\n  };\n\n  ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n    if (e.module === this.getModuleName() && e.enable) {\n      if (this.columnMenu) {\n        this.columnMenu.destroy();\n        remove(this.element);\n      }\n\n      this.render();\n    }\n  };\n\n  ColumnMenu.prototype.render = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n    this.element = this.parent.createElement('ul', {\n      id: this.gridID + '_columnmenu',\n      className: 'e-colmenu'\n    });\n    this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n    this.parent.element.appendChild(this.element);\n    this.columnMenu = new Menu({\n      cssClass: 'e-grid-menu',\n      enableRtl: this.parent.enableRtl,\n      enablePersistence: this.parent.enablePersistence,\n      locale: this.parent.locale,\n      items: this.getItems(),\n      select: this.columnMenuItemClick.bind(this),\n      beforeOpen: this.columnMenuBeforeOpen.bind(this),\n      onOpen: this.columnMenuOnOpen.bind(this),\n      onClose: this.columnMenuOnClose.bind(this),\n      beforeItemRender: this.beforeMenuItemRender.bind(this),\n      beforeClose: this.columnMenuBeforeClose.bind(this)\n    });\n    this.columnMenu.appendTo(this.element);\n    this.wireFilterEvents();\n  };\n\n  ColumnMenu.prototype.wireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n    }\n  };\n\n  ColumnMenu.prototype.unwireFilterEvents = function () {\n    if (!Browser.isDevice && this.isFilterItemAdded()) {\n      EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n    }\n  };\n\n  ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n    if (this.isChooserItem(args.item)) {\n      var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n      var column = this.parent.columnModel.filter(function (col) {\n        return col.field === field_1;\n      });\n      var check = createCheckBox(this.parent.createElement, false, {\n        label: args.item.text,\n        checked: column[0].visible\n      });\n\n      if (this.parent.enableRtl) {\n        check.classList.add('e-rtl');\n      }\n\n      args.element.innerHTML = '';\n      args.element.appendChild(check);\n    } else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n      args.element.appendChild(this.parent.createElement('span', {\n        className: 'e-icons e-caret'\n      }));\n      args.element.className += 'e-filter-item e-menu-caret-icon';\n    }\n  };\n\n  ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n    var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n\n    if (!isNullOrUndefined(args.parentItem) && this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' && colChooser && this.isChooserItem(colChooser)) {\n      args.cancel = true;\n    } else if (args.event && (closest(args.event.target, '.' + this.POP) || args.event.currentTarget && args.event.currentTarget.activeElement && parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup') || parentsUntil(args.event.target, 'e-popup') || parentsUntil(args.event.target, 'e-popup-wrapper')) && !Browser.isDevice) {\n      args.cancel = true;\n    }\n  };\n\n  ColumnMenu.prototype.isChooserItem = function (item) {\n    return item.id && item.id.indexOf('_colmenu_') >= 0 && this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n  };\n\n  ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n    args.column = this.targetColumn = this.getColumn();\n    this.parent.trigger(events.columnMenuOpen, args);\n\n    for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n      var item = _a[_i];\n      var key = this.getKeyFromId(item.id);\n      var dItem = this.defaultItems[key];\n\n      if (this.getDefaultItems().indexOf(key) !== -1) {\n        if (this.ensureDisabledStatus(key) && !dItem.hide) {\n          this.disableItems.push(item.text);\n        } else if (item.hide) {\n          this.hiddenItems.push(item.text);\n        }\n      }\n    }\n\n    this.columnMenu.enableItems(this.disableItems, false);\n    this.columnMenu.hideItems(this.hiddenItems);\n  };\n\n  ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n    if (args.element.className === 'e-menu-parent e-ul ') {\n      if (args.element.offsetHeight > window.innerHeight) {\n        args.element.style.maxHeight = window.innerHeight * 0.8 + 'px';\n        args.element.style.overflowY = 'auto';\n      } else if (this.parent.element.offsetHeight > window.innerHeight) {\n        args.element.style.maxHeight = window.innerHeight * 0.8 + 'px';\n        args.element.style.overflowY = 'auto';\n      }\n    }\n  };\n\n  ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n    var _this = this;\n\n    var status = false;\n\n    switch (item) {\n      case 'Group':\n        if (!this.parent.allowGrouping || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 || this.targetColumn && !this.targetColumn.allowGrouping) {\n          status = true;\n        }\n\n        break;\n\n      case 'AutoFitAll':\n      case 'AutoFit':\n        status = !this.parent.ensureModuleInjected(Resize);\n        break;\n\n      case 'Ungroup':\n        if (!this.parent.ensureModuleInjected(Group) || this.parent.ensureModuleInjected(Group) && this.targetColumn && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0) {\n          status = true;\n        }\n\n        break;\n\n      case 'SortDescending':\n      case 'SortAscending':\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n          this.parent.sortSettings.columns.forEach(function (ele) {\n            if (ele.field === _this.targetColumn.field && ele.direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n              status = true;\n            }\n          });\n        } else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) || this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n          status = true;\n        }\n\n        break;\n\n      case 'Filter':\n        if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n          status = false;\n        } else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n          status = true;\n        }\n\n    }\n\n    return status;\n  };\n\n  ColumnMenu.prototype.columnMenuItemClick = function (args) {\n    var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n\n    switch (item) {\n      case 'AutoFit':\n        this.parent.autoFitColumns(this.targetColumn.field);\n        break;\n\n      case 'AutoFitAll':\n        this.parent.autoFitColumns([]);\n        break;\n\n      case 'Ungroup':\n        this.parent.ungroupColumn(this.targetColumn.field);\n        break;\n\n      case 'Group':\n        this.parent.groupColumn(this.targetColumn.field);\n        break;\n\n      case 'SortAscending':\n        this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n        break;\n\n      case 'SortDescending':\n        this.parent.sortColumn(this.targetColumn.field, 'Descending');\n        break;\n\n      case 'ColumnChooser':\n        var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n        var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n\n        if (checkbox && checkbox.classList.contains('e-check')) {\n          checkbox.classList.remove('e-check');\n          this.parent.hideColumns(key, 'field');\n        } else if (checkbox) {\n          this.parent.showColumns(key, 'field');\n          checkbox.classList.add('e-check');\n        }\n\n        break;\n\n      case 'Filter':\n        this.getFilter(args.element, args.item.id);\n        break;\n    }\n\n    args.column = this.targetColumn;\n    this.parent.trigger(events.columnMenuClick, args);\n  };\n\n  ColumnMenu.prototype.columnMenuOnClose = function (args) {\n    var parent = 'parentObj';\n\n    if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n      this.columnMenu.enableItems(this.disableItems, false);\n      this.disableItems = [];\n      this.columnMenu.showItems(this.hiddenItems);\n      this.hiddenItems = [];\n\n      if (this.isFilterPopupOpen()) {\n        this.getFilter(args.element, args.element.id, true);\n      }\n    }\n\n    if (!this.parent.getFrozenColumns()) {\n      this.parent.notify(events.restoreFocus, {});\n    }\n  };\n\n  ColumnMenu.prototype.getDefaultItems = function () {\n    return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n  };\n\n  ColumnMenu.prototype.getItems = function () {\n    var items = [];\n    var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n\n    for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n      var item = defultItems_1[_i];\n\n      if (typeof item === 'string') {\n        if (item === 'ColumnChooser') {\n          var col = this.getDefaultItem(item);\n          col.items = this.createChooserItems();\n          items.push(col);\n        } else {\n          items.push(this.getDefaultItem(item));\n        }\n      } else {\n        items.push(item);\n      }\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.getDefaultItem = function (item) {\n    var menuItem = {};\n\n    switch (item) {\n      case 'SortAscending':\n        menuItem = {\n          iconCss: this.ASCENDING\n        };\n        break;\n\n      case 'SortDescending':\n        menuItem = {\n          iconCss: this.DESCENDING\n        };\n        break;\n\n      case 'Group':\n        menuItem = {\n          iconCss: this.GROUP\n        };\n        break;\n\n      case 'Ungroup':\n        menuItem = {\n          iconCss: this.UNGROUP\n        };\n        break;\n\n      case 'Filter':\n        menuItem = {\n          iconCss: this.FILTER\n        };\n        break;\n    }\n\n    this.defaultItems[item] = {\n      text: this.getLocaleText(item),\n      id: this.generateID(item),\n      iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n    };\n    return this.defaultItems[item];\n  };\n\n  ColumnMenu.prototype.getLocaleText = function (item) {\n    return this.l10n.getConstant(this.localeText[item]);\n  };\n\n  ColumnMenu.prototype.generateID = function (item, append) {\n    return this.gridID + '_colmenu_' + (append ? append + item : item);\n  };\n\n  ColumnMenu.prototype.getKeyFromId = function (id, append) {\n    return id.indexOf('_colmenu_') > 0 && id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n  };\n  /**\n   * @hidden\n   */\n\n\n  ColumnMenu.prototype.getColumnMenu = function () {\n    return this.element;\n  };\n\n  ColumnMenu.prototype.getModuleName = function () {\n    return 'columnMenu';\n  };\n\n  ColumnMenu.prototype.setLocaleKey = function () {\n    return {\n      'AutoFitAll': 'autoFitAll',\n      'AutoFit': 'autoFit',\n      'Group': 'Group',\n      'Ungroup': 'Ungroup',\n      'SortAscending': 'SortAscending',\n      'SortDescending': 'SortDescending',\n      'ColumnChooser': 'Columnchooser',\n      'Filter': 'FilterMenu'\n    };\n  };\n\n  ColumnMenu.prototype.getHeaderCell = function (e) {\n    return closest(e.target, 'th.e-headercell');\n  };\n\n  ColumnMenu.prototype.getColumn = function () {\n    if (this.headerCell) {\n      var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n      return this.parent.getColumnByUid(uid);\n    }\n\n    return null;\n  };\n\n  ColumnMenu.prototype.createChooserItems = function () {\n    var items = [];\n\n    for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n      var col = _a[_i];\n\n      if (col.showInColumnChooser && col.field) {\n        items.push({\n          id: this.generateID(col.field, this.CHOOSER),\n          text: col.headerText ? col.headerText : col.field\n        });\n      }\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.appendFilter = function (e) {\n    var filter = 'Filter';\n\n    if (!this.defaultItems[filter]) {\n      return;\n    } else {\n      var key = this.defaultItems[filter].id;\n\n      if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key);\n      } else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n        this.getFilter(e.target, key, true);\n      }\n    }\n  };\n\n  ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n    var filterPopup = this.getFilterPop();\n\n    if (filterPopup) {\n      filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n    } else {\n      this.parent.notify(events.filterOpen, {\n        col: this.targetColumn,\n        target: target,\n        isClose: isClose,\n        id: id\n      });\n    }\n  };\n\n  ColumnMenu.prototype.setPosition = function (li, ul) {\n    var gridPos = this.parent.element.getBoundingClientRect();\n    var liPos = li.getBoundingClientRect();\n    var left = liPos.left - gridPos.left;\n    var top = liPos.top - gridPos.top;\n\n    if (gridPos.height < top) {\n      top = top - ul.offsetHeight + liPos.height;\n    } else if (gridPos.height < top + ul.offsetHeight) {\n      top = gridPos.height - ul.offsetHeight;\n    }\n\n    if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n      top = window.innerHeight - ul.offsetHeight - gridPos.top;\n    }\n\n    left += this.parent.enableRtl ? -ul.offsetWidth : liPos.width;\n\n    if (gridPos.width <= left + ul.offsetWidth) {\n      left -= liPos.width + ul.offsetWidth;\n    } else if (left < 0) {\n      left += ul.offsetWidth + liPos.width;\n    }\n\n    ul.style.top = top + 'px';\n    ul.style.left = left + 'px';\n  };\n\n  ColumnMenu.prototype.filterPosition = function (e) {\n    var filterPopup = this.getFilterPop();\n    filterPopup.classList.add(this.WRAP);\n\n    if (!Browser.isDevice) {\n      var disp = filterPopup.style.display;\n      filterPopup.style.cssText += 'display:block;visibility:hidden';\n      var li = this.element.querySelector('.' + this.FILTER);\n\n      if (li) {\n        this.setPosition(li.parentElement, filterPopup);\n        filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n      }\n    }\n  };\n\n  ColumnMenu.prototype.getDefault = function () {\n    var items = [];\n\n    if (this.parent.ensureModuleInjected(Resize)) {\n      items.push('AutoFitAll');\n      items.push('AutoFit');\n    }\n\n    if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n      items.push('Group');\n      items.push('Ungroup');\n    }\n\n    if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n      items.push('SortAscending');\n      items.push('SortDescending');\n    }\n\n    items.push('ColumnChooser');\n\n    if (this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar' && this.parent.ensureModuleInjected(Filter)) {\n      items.push('Filter');\n    }\n\n    return items;\n  };\n\n  ColumnMenu.prototype.isFilterPopupOpen = function () {\n    var filterPopup = this.getFilterPop();\n    return filterPopup && filterPopup.style.display !== 'none';\n  };\n\n  ColumnMenu.prototype.getFilterPop = function () {\n    if (Browser.isDevice && this.targetColumn !== null) {\n      return document.getElementById(this.targetColumn.uid + '-flmdlg');\n    }\n\n    return this.parent.element.querySelector('.' + this.POP);\n  };\n\n  ColumnMenu.prototype.isFilterItemAdded = function () {\n    return this.parent.columnMenuItems && this.parent.columnMenuItems.indexOf('Filter') >= 0 || !this.parent.columnMenuItems;\n  };\n\n  return ColumnMenu;\n}();\n\nexport { ColumnMenu };","map":{"version":3,"sources":["C:/CN2/workspace-trunk/kain-front-end/node_modules/@syncfusion/ej2-grids/src/grid/actions/column-menu.js"],"names":["EventHandler","closest","Browser","isNullOrUndefined","remove","ContextMenu","Menu","parentsUntil","applyBiggerTheme","events","calculatePosition","createCheckBox","Group","Sort","Filter","Resize","ColumnMenu","parent","serviceLocator","defaultItems","localeText","setLocaleKey","disableItems","hiddenItems","isOpen","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","gridID","element","id","addEventListener","prototype","wireEvents","_this","getColumnMenuHandlers","forEach","ele","add","columnMenuHandlerDown","unwireEvents","destroy","gridElement","querySelector","columnMenu","removeEventListener","unwireFilterEvents","columnMenuHandlerClick","e","target","classList","contains","items","getItems","dataBind","headerCell","getHeaderCell","document","close","openColumnMenu","openColumnMenuByField","field","getColumnHeaderByField","pos","top","left","style","cssText","elePos","getBoundingClientRect","isDevice","window","innerHeight","height","innerWidth","width","enableRtl","open","preventDefault","parentElement","display","slice","call","getHeaderTable","querySelectorAll","isDestroyed","on","headerRefreshed","uiUpdate","enableAfterRenderMenu","initialEnd","render","isFilterItemAdded","filterDialogCreated","filterPosition","click","keyPressed","keyPressHandler","off","gObj","action","focusModule","currentInfo","column","getColumnByUid","firstElementChild","getAttribute","module","getModuleName","enable","l10n","getService","createElement","className","setAttribute","getConstant","appendChild","cssClass","enablePersistence","locale","select","columnMenuItemClick","bind","beforeOpen","columnMenuBeforeOpen","onOpen","columnMenuOnOpen","onClose","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","beforeClose","columnMenuBeforeClose","appendTo","wireFilterEvents","appendFilter","args","isChooserItem","item","field_1","getKeyFromId","columnModel","filter","col","check","label","text","checked","visible","innerHTML","colChooser","event","parentItem","cancel","currentTarget","activeElement","indexOf","targetColumn","getColumn","trigger","columnMenuOpen","_i","_a","length","key","dItem","getDefaultItems","ensureDisabledStatus","hide","push","enableItems","hideItems","offsetHeight","maxHeight","overflowY","status","allowGrouping","ensureModuleInjected","groupSettings","columns","allowSorting","sortSettings","direction","toLocaleLowerCase","replace","allowFiltering","filterSettings","type","autoFitColumns","ungroupColumn","groupColumn","sortColumn","checkbox","hideColumns","showColumns","getFilter","columnMenuClick","showItems","isFilterPopupOpen","getFrozenColumns","notify","restoreFocus","defultItems","columnMenuItems","getDefault","defultItems_1","getDefaultItem","createChooserItems","menuItem","iconCss","getLocaleText","generateID","append","getColumnMenu","uid","showInColumnChooser","headerText","isClose","filterPopup","getFilterPop","filterOpen","setPosition","li","ul","gridPos","liPos","offsetWidth","disp","getElementById"],"mappings":"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","sourcesContent":["import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil, applyBiggerTheme } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n * @hidden\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n        });\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n        });\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            this.columnMenu.items = this.getItems();\n            this.columnMenu.dataBind();\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    /** @hidden */\n    ColumnMenu.prototype.openColumnMenuByField = function (field) {\n        this.openColumnMenu({ target: this.parent.getColumnHeaderByField(field).querySelector('.e-columnmenu') });\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        if (e.preventDefault) {\n            e.preventDefault();\n        }\n        applyBiggerTheme(this.parent.element, this.columnMenu.element.parentElement);\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    ColumnMenu.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if (e.action === 'altDownArrow') {\n            var element = gObj.focusModule.currentInfo.element;\n            if (element && element.classList.contains('e-headercell')) {\n                var column = gObj.getColumnByUid(element.firstElementChild.getAttribute('e-mappinguid'));\n                this.openColumnMenuByField(column.field);\n            }\n        }\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.element.setAttribute('aria-label', this.l10n.getConstant('ColumnMenuDialogARIA'));\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onOpen: this.columnMenuOnOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field_1 = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.columnModel.filter(function (col) { return col.field === field_1; });\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column[0].visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper'))) && !Browser.isDevice) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1) {\n                if (this.ensureDisabledStatus(key) && !dItem.hide) {\n                    this.disableItems.push(item.text);\n                }\n                else if (item.hide) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.columnMenuOnOpen = function (args) {\n        if (args.element.className === 'e-menu-parent e-ul ') {\n            if (args.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n            else if (this.parent.element.offsetHeight > window.innerHeight) {\n                args.element.style.maxHeight = (window.innerHeight) * 0.8 + 'px';\n                args.element.style.overflowY = 'auto';\n            }\n        }\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0 ||\n                    this.targetColumn && !this.targetColumn.allowGrouping)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn && this.targetColumn.allowSorting) {\n                    this.parent.sortSettings.columns.forEach(function (ele) {\n                        if (ele.field === _this.targetColumn.field\n                            && ele.direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    });\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort) ||\n                    this.parent.allowSorting && this.targetColumn && !this.targetColumn.allowSorting) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter) && this.targetColumn && this.targetColumn.allowFiltering) {\n                    status = false;\n                }\n                else if (this.parent.ensureModuleInjected(Filter) && this.parent.allowFiltering\n                    && this.targetColumn && (!this.targetColumn.allowFiltering || this.parent.filterSettings.type === 'FilterBar')) {\n                    status = true;\n                }\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems, false);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n        if (!this.parent.getFrozenColumns()) {\n            this.parent.notify(events.restoreFocus, {});\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        if (Browser.isDevice && this.targetColumn !== null) {\n            return document.getElementById(this.targetColumn.uid + '-flmdlg');\n        }\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n"]},"metadata":{},"sourceType":"module"}