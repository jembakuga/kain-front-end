{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\n\nvar SummaryModelGenerator =\n/** @class */\nfunction () {\n  /**\n   * Constructor for Summary row model generator\n   */\n  function SummaryModelGenerator(parent) {\n    this.parent = parent;\n  }\n\n  SummaryModelGenerator.prototype.getData = function () {\n    var _this = this;\n\n    var rows = [];\n    this.parent.aggregates.slice().forEach(function (row) {\n      var columns = row.columns.filter(function (column) {\n        return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate) || _this.columnSelector(column);\n      });\n\n      if (columns.length) {\n        rows.push({\n          columns: columns\n        });\n      }\n    });\n    return rows;\n  };\n\n  SummaryModelGenerator.prototype.columnSelector = function (column) {\n    return column.footerTemplate !== undefined;\n  };\n\n  SummaryModelGenerator.prototype.getColumns = function (start, end) {\n    var columns = [];\n\n    if (this.parent.allowGrouping) {\n      this.parent.groupSettings.columns.forEach(function (value) {\n        return columns.push(new Column({}));\n      });\n    }\n\n    if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid) || this.parent.isRowDragable()) {\n      columns.push(new Column({}));\n    }\n\n    columns.push.apply(columns, this.parent.getColumns());\n    return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n  };\n\n  SummaryModelGenerator.prototype.generateRows = function (input, args, start, end) {\n    var _this = this;\n\n    if (input.length === 0) {\n      return [];\n    }\n\n    var data = this.buildSummaryData(input, args);\n    var rows = [];\n    this.getData().forEach(function (row, index) {\n      rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined, start, end));\n    });\n    return rows;\n  };\n\n  SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end) {\n    var _this = this;\n\n    var tmp = [];\n    var indents = this.getIndentByLevel(raw);\n    var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n    var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid) ? 1 : 0);\n\n    if (this.parent.isRowDragable()) {\n      indentLength++;\n      indents = ['e-indentcelltop'];\n    }\n\n    this.getColumns(start, end).forEach(function (value, index) {\n      return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : index < _this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[index], isDetailGridAlone));\n    });\n    var row = new Row({\n      data: data,\n      attributes: {\n        class: 'e-summaryrow'\n      }\n    });\n    row.cells = tmp;\n    row.uid = getUid('grid-row');\n    row.visible = tmp.some(function (cell) {\n      return cell.isDataCell && cell.visible;\n    });\n    return row;\n  };\n\n  SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n    //Get the summary column by display\n    var sColumn = summaryRow.columns.filter(function (scolumn) {\n      return scolumn.columnName === column.field;\n    })[0];\n    var attrs = {\n      'style': {\n        'textAlign': column.textAlign\n      },\n      'e-mappinguid': column.uid,\n      index: column.index\n    };\n\n    if (indent) {\n      attrs.class = indent;\n    }\n\n    if (isNullOrUndefined(indent) && isDetailGridAlone) {\n      attrs.class = 'e-detailindentcelltop';\n    }\n\n    var opt = {\n      'visible': column.visible,\n      'isDataCell': !isNullOrUndefined(sColumn),\n      'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n      'column': sColumn || {},\n      'attributes': attrs,\n      'cellType': cellType\n    };\n    return new Cell(opt);\n  };\n\n  SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n    var _this = this;\n\n    var dummy = [];\n    var summaryRows = this.getData();\n    var single = {};\n    var key = '';\n    summaryRows.forEach(function (row) {\n      single = {};\n      row.columns.forEach(function (column) {\n        single = _this.setTemplate(column, args && args.aggregates ? args : data, single);\n      });\n      dummy.push(single);\n    });\n    return dummy;\n  };\n\n  SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n    return this.parent.groupSettings.columns.map(function () {\n      return 'e-indentcelltop';\n    });\n  };\n\n  SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n    var _this = this;\n\n    var types = column.type;\n    var helper = {};\n\n    var formatFn = column.getFormatter() || function () {\n      return function (a) {\n        return a;\n      };\n    }();\n\n    var group = data;\n\n    if (!(types instanceof Array)) {\n      types = [column.type];\n    }\n\n    types.forEach(function (type) {\n      var key = column.field + ' - ' + type.toLowerCase();\n      var disp = column.columnName;\n      var val = type !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] : calculateAggregate(type, group.aggregates ? group : data, column, _this.parent);\n      single[disp] = single[disp] || {};\n      single[disp][key] = val;\n      single[disp][type] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n\n      if (group.field) {\n        single[disp].field = group.field;\n        single[disp].key = group.key;\n      }\n    });\n    helper.format = column.getFormatter();\n    column.setTemplate(helper);\n    return single;\n  };\n\n  SummaryModelGenerator.prototype.getCellType = function () {\n    return CellType.Summary;\n  };\n\n  return SummaryModelGenerator;\n}();\n\nexport { SummaryModelGenerator };\n\nvar GroupSummaryModelGenerator =\n/** @class */\nfunction (_super) {\n  __extends(GroupSummaryModelGenerator, _super);\n\n  function GroupSummaryModelGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n    return column.groupFooterTemplate !== undefined;\n  };\n\n  GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n    if (level === void 0) {\n      level = this.parent.groupSettings.columns.length;\n    }\n\n    return this.parent.groupSettings.columns.map(function (v, indx) {\n      return indx <= level - 1 ? '' : 'e-indentcelltop';\n    });\n  };\n\n  GroupSummaryModelGenerator.prototype.getCellType = function () {\n    return CellType.GroupSummary;\n  };\n\n  return GroupSummaryModelGenerator;\n}(SummaryModelGenerator);\n\nexport { GroupSummaryModelGenerator };\n\nvar CaptionSummaryModelGenerator =\n/** @class */\nfunction (_super) {\n  __extends(CaptionSummaryModelGenerator, _super);\n\n  function CaptionSummaryModelGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n    return column.groupCaptionTemplate !== undefined;\n  };\n\n  CaptionSummaryModelGenerator.prototype.getData = function () {\n    var initVal = {\n      columns: []\n    };\n    return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n      prev.columns = prev.columns.concat(cur.columns);\n      return prev;\n    }, initVal)];\n  };\n\n  CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n    return (this.getData()[0].columns || []).length === 0;\n  };\n\n  CaptionSummaryModelGenerator.prototype.getCellType = function () {\n    return CellType.CaptionSummary;\n  };\n\n  return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator);\n\nexport { CaptionSummaryModelGenerator };","map":{"version":3,"sources":["C:/CN2/workspace-trunk/kain-front-end/node_modules/@syncfusion/ej2-grids/src/grid/services/summary-model-generator.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Row","Column","isNullOrUndefined","calculateAggregate","getUid","CellType","Cell","SummaryModelGenerator","parent","getData","_this","rows","aggregates","slice","forEach","row","columns","filter","column","footerTemplate","groupFooterTemplate","groupCaptionTemplate","columnSelector","length","push","undefined","getColumns","start","end","allowGrouping","groupSettings","value","detailTemplate","childGrid","isRowDragable","apply","generateRows","input","args","data","buildSummaryData","index","getGeneratedRow","level","summaryRow","raw","tmp","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","DetailFooterIntent","attributes","class","cells","uid","visible","some","cell","isDataCell","cellType","indent","sColumn","scolumn","columnName","field","attrs","textAlign","opt","dummy","summaryRows","single","key","setTemplate","map","types","type","helper","formatFn","getFormatter","a","group","toLowerCase","disp","val","format","Summary","GroupSummaryModelGenerator","_super","arguments","v","indx","GroupSummary","CaptionSummaryModelGenerator","initVal","call","reduce","prev","cur","concat","isEmpty","CaptionSummary"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate, getUid } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        this.parent.aggregates.slice().forEach(function (row) {\n            var columns = row.columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new Column({})); });\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid) || this.parent.isRowDragable()) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end) {\n        var _this = this;\n        if (input.length === 0) {\n            return [];\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        this.getData().forEach(function (row, index) {\n            rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined, start, end));\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end) {\n        var _this = this;\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ||\n            !isNullOrUndefined(this.parent.childGrid) ? 1 : 0);\n        if (this.parent.isRowDragable()) {\n            indentLength++;\n            indents = ['e-indentcelltop'];\n        }\n        this.getColumns(start, end).forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() :\n            index < _this.parent.groupSettings.columns.length ? CellType.Indent : CellType.DetailFooterIntent, indents[index], isDetailGridAlone)); });\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.uid = getUid('grid-row');\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = {\n            'style': { 'textAlign': column.textAlign },\n            'e-mappinguid': column.uid, index: column.index\n        };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var _this = this;\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        summaryRows.forEach(function (row) {\n            single = {};\n            row.columns.forEach(function (column) {\n                single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n            });\n            dummy.push(single);\n        });\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var _this = this;\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        types.forEach(function (type) {\n            var key = column.field + ' - ' + type.toLowerCase();\n            var disp = column.columnName;\n            var val = type !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(type, group.aggregates ? group : data, column, _this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][type] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        });\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n"]},"metadata":{},"sourceType":"module"}