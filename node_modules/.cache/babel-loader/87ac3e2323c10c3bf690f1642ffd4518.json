{"ast":null,"code":"import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\n\nvar VirtualScroll =\n/** @class */\nfunction () {\n  function VirtualScroll(parent, locator) {\n    this.parent = parent;\n    this.locator = locator;\n    this.addEventListener();\n  }\n\n  VirtualScroll.prototype.getModuleName = function () {\n    return 'virtualscroll';\n  };\n\n  VirtualScroll.prototype.instantiateRenderer = function () {\n    this.parent.log(['limitation', 'virtual_height'], 'virtualization');\n    var renderer = this.locator.getService('rendererFactory');\n\n    if (!this.parent.getFrozenColumns()) {\n      if (this.parent.enableColumnVirtualization) {\n        renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n      }\n\n      renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n    }\n\n    this.ensurePageSize();\n  };\n\n  VirtualScroll.prototype.ensurePageSize = function () {\n    var rowHeight = this.parent.getRowHeight();\n    var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.parent.height : this.parent.element.getBoundingClientRect().height;\n    this.blockSize = ~~(vHeight / rowHeight);\n    var height = this.blockSize * 2;\n    var size = this.parent.pageSettings.pageSize;\n    this.parent.setProperties({\n      pageSettings: {\n        pageSize: size < height ? height : size\n      }\n    }, true);\n  };\n\n  VirtualScroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(initialLoad, this.instantiateRenderer, this);\n    this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n  };\n\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(initialLoad, this.instantiateRenderer);\n    this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n  };\n\n  VirtualScroll.prototype.refreshVirtualElement = function (args) {\n    if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n      var renderer = this.locator.getService('rendererFactory');\n      renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n    }\n  };\n\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return VirtualScroll;\n}();\n\nexport { VirtualScroll };","map":{"version":3,"sources":["C:/CN2/workspace-trunk/kain-front-end/node_modules/@syncfusion/ej2-grids/src/grid/actions/virtual-scroll.js"],"names":["initialLoad","RenderType","VirtualContentRenderer","VirtualHeaderRenderer","events","VirtualScroll","parent","locator","addEventListener","prototype","getModuleName","instantiateRenderer","log","renderer","getService","getFrozenColumns","enableColumnVirtualization","addRenderer","Header","Content","ensurePageSize","rowHeight","getRowHeight","vHeight","height","toString","indexOf","element","getBoundingClientRect","blockSize","size","pageSettings","pageSize","setProperties","isDestroyed","on","columnWidthChanged","refreshVirtualElement","removeEventListener","off","args","module","getRenderer","destroy"],"mappings":"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","sourcesContent":["import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        this.parent.log(['limitation', 'virtual_height'], 'virtualization');\n        var renderer = this.locator.getService('rendererFactory');\n        if (!this.parent.getFrozenColumns()) {\n            if (this.parent.enableColumnVirtualization) {\n                renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n            }\n            renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        }\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        var vHeight = this.parent.height.toString().indexOf('%') < 0 ? this.parent.height :\n            this.parent.element.getBoundingClientRect().height;\n        this.blockSize = ~~(vHeight / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"]},"metadata":{},"sourceType":"module"}