{"ast":null,"code":"import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject, extendObjWithFn } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\n\nvar RowRenderer =\n/** @class */\nfunction () {\n  function RowRenderer(serviceLocator, cellType, parent) {\n    this.isSpan = false;\n    this.cellType = cellType;\n    this.serviceLocator = serviceLocator;\n    this.parent = parent;\n    this.element = this.parent.createElement('tr', {\n      attrs: {\n        role: 'row'\n      }\n    });\n  }\n  /**\n   * Function to render the row content based on Column[] and data.\n   * @param  {Column[]} columns\n   * @param  {Object} data?\n   * @param  {{[x:string]:Object}} attributes?\n   * @param  {string} rowTemplate?\n   */\n\n\n  RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n    return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n  };\n  /**\n   * Function to refresh the row content based on Column[] and data.\n   * @param  {Column[]} columns\n   * @param  {Object} data?\n   * @param  {{[x:string]:Object}} attributes?\n   * @param  {string} rowTemplate?\n   */\n\n\n  RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n    if (isChanged) {\n      row.data = extendObjWithFn({}, row.changes);\n      this.refreshMergeCells(row);\n    }\n\n    var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n    var tr = this.refreshRow(row, columns, attributes, rowTemplate, null, isChanged);\n    var cells = [].slice.call(tr.cells);\n    node.innerHTML = '';\n\n    for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n      var cell = cells_1[_i];\n      node.appendChild(cell);\n    }\n  };\n\n  RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode, isEdit) {\n    var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n    var rowArgs = {\n      data: row.data\n    };\n    var cellArgs = {\n      data: row.data\n    };\n    var attrCopy = extend({}, attributes, {});\n    var chekBoxEnable = this.parent.getColumns().filter(function (col) {\n      return col.type === 'checkbox' && col.field;\n    })[0];\n    var value = false;\n\n    if (chekBoxEnable) {\n      value = getObject(chekBoxEnable.field, rowArgs.data);\n    }\n\n    if (row.isDataRow) {\n      row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n    }\n\n    if (row.isDataRow && this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n      row.isSelected = true;\n\n      if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n        this.parent.getSelectedRowIndexes().push(row.index);\n      }\n    }\n\n    this.buildAttributeFromRow(tr, row);\n    addAttributes(tr, attrCopy);\n    setStyleAndAttributes(tr, row.attributes);\n    var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n\n    var _loop_1 = function (i, len) {\n      var cell = row.cells[i];\n      cell.isSelected = row.isSelected;\n      var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n      var attrs = {\n        'index': !isNullOrUndefined(row.index) ? row.index.toString() : ''\n      };\n\n      if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n        attrs['class'] = this_1.parent.isPrinting ? 'e-detailrowcollapse' : 'e-detailrowexpand';\n      }\n\n      var td = cellRenderer.render(row.cells[i], row.data, attrs, row.isExpand, isEdit);\n\n      if (row.cells[i].cellType !== CellType.Filter) {\n        if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n          this_1.parent.trigger(queryCellInfo, extend(cellArgs, {\n            cell: td,\n            column: cell.column,\n            colSpan: 1,\n            rowSpan: 1,\n            foreignKeyData: row.cells[i].foreignKeyData,\n            requestType: this_1.parent.requestTypeAction\n          }));\n          var isRowSpanned = false;\n\n          if (row.index > 0 && this_1.isSpan) {\n            var prevRowCells = this_1.parent.groupSettings.columns.length > 0 && !this_1.parent.getRowsObject()[row.index - 1].isDataRow ? this_1.parent.getRowsObject()[row.index].cells : this_1.parent.getRowsObject()[row.index - 1].cells;\n            var uid_1 = 'uid';\n            var prevRowCell = prevRowCells.filter(function (cell) {\n              return cell.column.uid === row.cells[i].column[uid_1];\n            })[0];\n            isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;\n          }\n\n          if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {\n            this_1.isSpan = true;\n            var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);\n            td = cellMerge.render(cellArgs, row, i, td);\n          }\n        }\n\n        if (!row.cells[i].isSpanned) {\n          tr.appendChild(td);\n        }\n      }\n    };\n\n    var this_1 = this;\n\n    for (var i = 0, len = row.cells.length; i < len; i++) {\n      _loop_1(i, len);\n    }\n\n    var args = {\n      row: tr,\n      rowHeight: this.parent.rowHeight\n    };\n\n    if (row.isDataRow) {\n      this.parent.trigger(rowDataBound, extend(rowArgs, args));\n\n      if (this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate) {\n        var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n\n        if (td) {\n          td.classList.add('e-detailrowvisible');\n        }\n      }\n    }\n\n    if (this.parent.enableVirtualization) {\n      rowArgs.rowHeight = this.parent.rowHeight;\n    }\n\n    if (rowArgs.rowHeight) {\n      tr.style.height = rowArgs.rowHeight + 'px';\n    } else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n      tr.style.height = this.parent.rowHeight + 'px';\n    }\n\n    if (row.cssClass) {\n      tr.classList.add(row.cssClass);\n    }\n\n    var vFTable = this.parent.enableColumnVirtualization && this.parent.frozenColumns !== 0;\n\n    if (!vFTable && this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n      for (var i = 0; i < this.parent.aggregates.length; i++) {\n        var property = 'properties';\n        var column = 'columns';\n\n        if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n          var summarycell = tr.querySelectorAll('.e-summarycell');\n\n          if (summarycell.length) {\n            var lastSummaryCell = summarycell[summarycell.length - 1];\n            addClass([lastSummaryCell], ['e-lastsummarycell']);\n          }\n        }\n      }\n    }\n\n    return tr;\n  };\n\n  RowRenderer.prototype.refreshMergeCells = function (row) {\n    for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n      var cell = _a[_i];\n      cell.isSpanned = false;\n    }\n\n    return row;\n  };\n  /**\n   * Function to check and add alternative row css class.\n   * @param  {Element} tr\n   * @param  {{[x:string]:Object}} attr\n   */\n\n\n  RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n    var attr = {};\n    var prop = {\n      'rowindex': 'aria-rowindex',\n      'dataUID': 'data-uid',\n      'ariaSelected': 'aria-selected'\n    };\n    var classes = [];\n\n    if (row.isDataRow) {\n      classes.push('e-row');\n    }\n\n    if (row.isAltRow) {\n      classes.push('e-altrow');\n    }\n\n    if (!isNullOrUndefined(row.index)) {\n      attr[prop.rowindex] = row.index;\n    }\n\n    if (row.rowSpan) {\n      attr.rowSpan = row.rowSpan;\n    }\n\n    if (row.uid) {\n      attr[prop.dataUID] = row.uid;\n    }\n\n    if (row.isSelected) {\n      attr[prop.ariaSelected] = true;\n    }\n\n    if (row.visible === false) {\n      classes.push('e-hide');\n    }\n\n    attr.class = classes;\n    setStyleAndAttributes(tr, attr);\n  };\n\n  return RowRenderer;\n}();\n\nexport { RowRenderer };","map":{"version":3,"sources":["C:/CN2/workspace-trunk/kain-front-end/node_modules/@syncfusion/ej2-grids/src/grid/renderer/row-renderer.js"],"names":["isNullOrUndefined","extend","addClass","attributes","addAttributes","rowDataBound","queryCellInfo","setStyleAndAttributes","getObject","extendObjWithFn","CellType","CellMergeRender","RowRenderer","serviceLocator","cellType","parent","isSpan","element","createElement","attrs","role","prototype","render","row","columns","rowTemplate","cloneNode","refreshRow","refresh","isChanged","data","changes","refreshMergeCells","node","querySelector","uid","tr","cells","slice","call","innerHTML","_i","cells_1","length","cell","appendChild","isEdit","rowArgs","cellArgs","attrCopy","chekBoxEnable","getColumns","filter","col","type","field","value","isDataRow","isSelected","getSelectedRowIndexes","indexOf","index","isCheckBoxSelection","checkAllRows","enableVirtualization","push","buildAttributeFromRow","cellRendererFact","getService","_loop_1","i","len","cellRenderer","getCellRenderer","Data","toString","isExpand","DetailExpand","this_1","isPrinting","td","Filter","CommandColumn","trigger","column","colSpan","rowSpan","foreignKeyData","requestType","requestTypeAction","isRowSpanned","prevRowCells","groupSettings","getRowsObject","uid_1","prevRowCell","rowSpanRange","cellSpan","cellMerge","isSpanned","args","rowHeight","childGrid","isRowDragable","detailTemplate","querySelectorAll","classList","add","style","height","cssClass","vFTable","enableColumnVirtualization","frozenColumns","scrollHeight","aggregates","property","footerTemplate","summarycell","lastSummaryCell","_a","attr","prop","classes","isAltRow","rowindex","dataUID","ariaSelected","visible","class"],"mappings":"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","sourcesContent":["import { isNullOrUndefined, extend, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes, getObject, extendObjWithFn } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.isSpan = false;\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extendObjWithFn({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate, null, isChanged);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode, isEdit) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getObject(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var _loop_1 = function (i, len) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = this_1.parent.isPrinting ? 'e-detailrowcollapse' : 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs, row.isExpand, isEdit);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this_1.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        rowSpan: 1, foreignKeyData: row.cells[i].foreignKeyData,\n                        requestType: this_1.parent.requestTypeAction\n                    }));\n                    var isRowSpanned = false;\n                    if (row.index > 0 && this_1.isSpan) {\n                        var prevRowCells = this_1.parent.groupSettings.columns.length > 0 &&\n                            !this_1.parent.getRowsObject()[row.index - 1].isDataRow ?\n                            this_1.parent.getRowsObject()[row.index].cells : this_1.parent.getRowsObject()[row.index - 1].cells;\n                        var uid_1 = 'uid';\n                        var prevRowCell = prevRowCells.filter(function (cell) {\n                            return cell.column.uid === row.cells[i].column[uid_1];\n                        })[0];\n                        isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;\n                    }\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {\n                        this_1.isSpan = true;\n                        var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n            if (this.parent.childGrid || this.parent.isRowDragable() || this.parent.detailTemplate) {\n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n            }\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && (tr.querySelector('.e-headercell') || tr.querySelector('.e-groupcaption'))) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        var vFTable = this.parent.enableColumnVirtualization && this.parent.frozenColumns !== 0;\n        if (!vFTable && this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n"]},"metadata":{},"sourceType":"module"}