{"ast":null,"code":"import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, applyBiggerTheme } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\n\nvar DialogEditRender =\n/** @class */\nfunction () {\n  /**\n   * Constructor for render module\n   */\n  function DialogEditRender(parent, serviceLocator) {\n    this.parent = parent;\n    this.serviceLocator = serviceLocator;\n\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.dialogDestroy, this.destroy, this);\n    this.parent.on(events.destroy, this.destroy, this);\n  }\n\n  DialogEditRender.prototype.setLocaleObj = function () {\n    this.l10n = this.serviceLocator.getService('localization');\n  };\n\n  DialogEditRender.prototype.addNew = function (elements, args) {\n    this.isEdit = false;\n    this.createDialog(elements, args);\n  };\n\n  DialogEditRender.prototype.update = function (elements, args) {\n    this.isEdit = true;\n    this.createDialog(elements, args);\n  };\n\n  DialogEditRender.prototype.createDialog = function (elements, args) {\n    var gObj = this.parent;\n    this.dialog = this.parent.createElement('div', {\n      id: gObj.element.id + '_dialogEdit_wrapper',\n      styles: 'width: auto'\n    });\n    this.dialog.setAttribute('aria-label', 'Dialog edit');\n    gObj.element.appendChild(this.dialog);\n    this.setLocaleObj(); // let position: PositionDataModel = this.parent.element.getBoundingClientRect().height < 400 ?\n    //     { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n\n    this.dialogObj = new Dialog(extend({\n      header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] : this.l10n.getConstant('AddFormTitle'),\n      isModal: true,\n      visible: true,\n      cssClass: 'e-edit-dialog',\n      content: this.getEditElement(elements, args),\n      showCloseIcon: true,\n      allowDragging: true,\n      // position: position,\n      close: this.dialogClose.bind(this),\n      closeOnEscape: true,\n      width: gObj.editSettings.template ? 'auto' : '330px',\n      target: args.target ? args.target : document.body,\n      animationSettings: {\n        effect: 'None'\n      },\n      buttons: [{\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('SaveButton'),\n          cssClass: 'e-primary',\n          isPrimary: true\n        }\n      }, {\n        click: this.btnClick.bind(this),\n        buttonModel: {\n          cssClass: 'e-flat',\n          content: this.l10n.getConstant('CancelButton')\n        }\n      }]\n    }, gObj.editSettings.dialog ? gObj.editSettings.dialog.params || {} : {}));\n\n    if (!isBlazor()) {\n      args.dialog = this.dialogObj;\n    } else {\n      this.dialogObj.locale = this.parent.locale;\n    }\n\n    var isStringTemplate = 'isStringTemplate';\n    this.dialogObj[isStringTemplate] = true;\n    this.dialogObj.appendTo(this.dialog);\n    applyBiggerTheme(this.parent.element, this.dialogObj.element.parentElement);\n  };\n\n  DialogEditRender.prototype.btnClick = function (e) {\n    if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n      this.dialogClose();\n    } else {\n      this.parent.endEdit();\n    }\n  };\n\n  DialogEditRender.prototype.dialogClose = function () {\n    this.parent.closeEdit();\n    this.destroy();\n  };\n\n  DialogEditRender.prototype.destroy = function (args) {\n    var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n    updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings);\n    this.parent.notify(events.destroyForm, {});\n    this.parent.isEdit = false;\n    this.parent.notify(events.toolbarRefresh, {});\n\n    if (this.dialog && !this.dialogObj.isDestroyed) {\n      this.dialogObj.destroy();\n      remove(this.dialog);\n    }\n  };\n\n  DialogEditRender.prototype.getEditElement = function (elements, args) {\n    var _this = this;\n\n    var gObj = this.parent;\n    var div = this.parent.createElement('div', {\n      className: this.isEdit ? 'e-editedrow' : 'e-insertedrow'\n    });\n    var form = args.form = this.parent.createElement('form', {\n      id: gObj.element.id + 'EditForm',\n      className: 'e-gridform'\n    });\n\n    if (this.parent.editSettings.template) {\n      var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n      var dummyData = extend({}, args.rowData, {\n        isAdd: !this.isEdit\n      }, true);\n      appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n\n      var setRules = function () {\n        var columns = _this.parent.getColumns();\n\n        columns.forEach(function (column) {\n          if (column.validationRules) {\n            _this.parent.editModule.formObj.rules[column.field] = column.validationRules;\n          }\n        });\n      };\n\n      updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n      div.appendChild(form);\n      return div;\n    }\n\n    var table = this.parent.createElement('table', {\n      className: 'e-table',\n      attrs: {\n        cellspacing: '6px'\n      }\n    });\n    var tbody = this.parent.createElement('tbody');\n    var cols = gObj.getColumns();\n\n    for (var i = 0; i < cols.length; i++) {\n      if (this.parent.editModule.checkColumnIsGrouped(cols[i]) || cols[i].commands || cols[i].commandsTemplate) {\n        continue;\n      }\n\n      var tr = this.parent.createElement('tr');\n      var dataCell = this.parent.createElement('td', {\n        className: 'e-rowcell',\n        attrs: {\n          style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n        }\n      });\n      var label = this.parent.createElement('label', {\n        innerHTML: cols[i].field\n      });\n      elements[cols[i].uid].classList.remove('e-input');\n      dataCell.appendChild(elements[cols[i].uid]);\n      tr.appendChild(dataCell);\n      tbody.appendChild(tr);\n    }\n\n    table.appendChild(tbody);\n    form.appendChild(table);\n    div.appendChild(form);\n    return div;\n  };\n\n  DialogEditRender.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.dialogDestroy, this.destroy);\n    this.parent.off(events.destroy, this.destroy);\n  };\n\n  return DialogEditRender;\n}();\n\nexport { DialogEditRender };","map":{"version":3,"sources":["C:/CN2/workspace-trunk/kain-front-end/node_modules/@syncfusion/ej2-grids/src/grid/renderer/dialog-edit-renderer.js"],"names":["Dialog","remove","extend","updateBlazorTemplate","isBlazor","events","appendChildren","applyBiggerTheme","DialogEditRender","parent","serviceLocator","isDestroyed","on","dialogDestroy","destroy","prototype","setLocaleObj","l10n","getService","addNew","elements","args","isEdit","createDialog","update","gObj","dialog","createElement","id","element","styles","setAttribute","appendChild","dialogObj","header","getConstant","primaryKeyValue","isModal","visible","cssClass","content","getEditElement","showCloseIcon","allowDragging","close","dialogClose","bind","closeOnEscape","width","editSettings","template","target","document","body","animationSettings","effect","buttons","click","btnClick","buttonModel","isPrimary","params","locale","isStringTemplate","appendTo","parentElement","e","toLowerCase","innerText","trim","endEdit","closeEdit","editTemplateID","notify","destroyForm","toolbarRefresh","_this","div","className","form","dummyData","rowData","isAdd","getEditTemplate","setRules","columns","getColumns","forEach","column","validationRules","editModule","formObj","rules","field","table","attrs","cellspacing","tbody","cols","i","length","checkColumnIsGrouped","commands","commandsTemplate","tr","dataCell","style","enableRtl","label","innerHTML","uid","classList","removeEventListener","off"],"mappings":"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","sourcesContent":["import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove, extend, updateBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { appendChildren, applyBiggerTheme } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper', styles: 'width: auto' });\n        this.dialog.setAttribute('aria-label', 'Dialog edit');\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        // let position: PositionDataModel = this.parent.element.getBoundingClientRect().height < 400 ?\n        //     { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog(extend({\n            header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements, args),\n            showCloseIcon: true,\n            allowDragging: true,\n            // position: position,\n            close: this.dialogClose.bind(this),\n            closeOnEscape: true, width: gObj.editSettings.template ? 'auto' : '330px',\n            target: args.target ? args.target : document.body, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        }, gObj.editSettings.dialog ? (gObj.editSettings.dialog.params || {}) : {}));\n        if (!isBlazor()) {\n            args.dialog = this.dialogObj;\n        }\n        else {\n            this.dialogObj.locale = this.parent.locale;\n        }\n        var isStringTemplate = 'isStringTemplate';\n        this.dialogObj[isStringTemplate] = true;\n        this.dialogObj.appendTo(this.dialog);\n        applyBiggerTheme(this.parent.element, this.dialogObj.element.parentElement);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n        this.destroy();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n        updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings);\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getEditElement = function (elements, args) {\n        var _this = this;\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = args.form =\n            this.parent.createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        if (this.parent.editSettings.template) {\n            var editTemplateID = this.parent.element.id + 'editSettingsTemplate';\n            var dummyData = extend({}, args.rowData, { isAdd: !this.isEdit }, true);\n            appendChildren(form, this.parent.getEditTemplate()(dummyData, this.parent, 'editSettingsTemplate', editTemplateID));\n            var setRules = function () {\n                var columns = _this.parent.getColumns();\n                columns.forEach(function (column) {\n                    if (column.validationRules) {\n                        _this.parent.editModule.formObj.rules[column.field] = column.validationRules;\n                    }\n                });\n            };\n            updateBlazorTemplate(editTemplateID, 'Template', this.parent.editSettings, true, setRules);\n            div.appendChild(form);\n            return div;\n        }\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (this.parent.editModule.checkColumnIsGrouped(cols[i]) || cols[i].commands || cols[i].commandsTemplate) {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = this.parent.createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n"]},"metadata":{},"sourceType":"module"}