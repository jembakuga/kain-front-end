{"ast":null,"code":"import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\n\nvar DropDownEditCell =\n/** @class */\nfunction () {\n  function DropDownEditCell(parent) {\n    //constructor\n    this.parent = parent;\n    this.flag = false;\n  }\n\n  DropDownEditCell.prototype.create = function (args) {\n    //create\n    var complexFieldName = getComplexFieldID(args.column.field);\n    return this.parent.createElement('input', {\n      className: 'e-field',\n      attrs: {\n        id: this.parent.element.id + complexFieldName,\n        name: complexFieldName,\n        type: 'text',\n        'e-mappinguid': args.column.uid\n      }\n    });\n  };\n\n  DropDownEditCell.prototype.write = function (args) {\n    this.column = args.column;\n    var isInline = this.parent.editSettings.mode !== 'Dialog';\n    this.obj = new DropDownList(extend({\n      dataSource: this.parent.dataSource instanceof DataManager ? this.parent.dataSource : new DataManager(this.parent.dataSource),\n      query: new Query().select(args.column.field),\n      enabled: isEditable(args.column, args.requestType, args.element),\n      fields: {\n        value: args.column.field\n      },\n      value: getObject(args.column.field, args.rowData),\n      enableRtl: this.parent.enableRtl,\n      actionComplete: this.ddActionComplete.bind(this),\n      created: this.dropdownCreated.bind(this),\n      placeholder: isInline ? '' : args.column.headerText,\n      popupHeight: '200px',\n      floatLabelType: isInline ? 'Never' : 'Always',\n      open: this.dropDownOpen.bind(this),\n      sortOrder: 'Ascending'\n    }, args.column.edit.params));\n\n    if (isBlazor()) {\n      this.obj.locale = this.parent.locale;\n    }\n\n    this.obj.appendTo(args.element);\n    /* tslint:disable-next-line:no-any */\n\n    args.element.setAttribute('name', getComplexFieldID(args.column.field));\n  };\n\n  DropDownEditCell.prototype.read = function (element) {\n    return element.ej2_instances[0].value;\n  };\n\n  DropDownEditCell.prototype.dropdownCreated = function (e) {\n    this.flag = true;\n  };\n\n  DropDownEditCell.prototype.ddActionComplete = function (e) {\n    e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n\n    if (this.flag && this.column.dataSource) {\n      this.column.dataSource.dataSource.json = e.result;\n    }\n\n    this.flag = false;\n  };\n\n  DropDownEditCell.prototype.dropDownOpen = function (args) {\n    var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n\n    if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n      var dlgObj = document.querySelector('#' + dlgElement.id).ej2_instances[0];\n      args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n    }\n  };\n\n  DropDownEditCell.prototype.destroy = function () {\n    if (this.obj) {\n      this.obj.destroy();\n    }\n  };\n\n  return DropDownEditCell;\n}();\n\nexport { DropDownEditCell };","map":{"version":3,"sources":["C:/CN2/workspace-trunk/kain-front-end/node_modules/@syncfusion/ej2-grids/src/grid/renderer/dropdown-edit-cell.js"],"names":["extend","isNullOrUndefined","isBlazor","DropDownList","Query","DataManager","DataUtil","isEditable","getComplexFieldID","getObject","parentsUntil","DropDownEditCell","parent","flag","prototype","create","args","complexFieldName","column","field","createElement","className","attrs","id","element","name","type","uid","write","isInline","editSettings","mode","obj","dataSource","query","select","enabled","requestType","fields","value","rowData","enableRtl","actionComplete","ddActionComplete","bind","created","dropdownCreated","placeholder","headerText","popupHeight","floatLabelType","open","dropDownOpen","sortOrder","edit","params","locale","appendTo","setAttribute","read","ej2_instances","e","result","distinct","json","dlgElement","dlgObj","document","querySelector","popup","style","zIndex","toString","destroy"],"mappings":"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","sourcesContent":["import { extend, isNullOrUndefined, isBlazor } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getObject } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n        this.flag = false;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: this.parent.element.id + complexFieldName,\n                name: complexFieldName, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: getObject(args.column.field, args.rowData),\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete.bind(this),\n            created: this.dropdownCreated.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        if (isBlazor()) {\n            this.obj.locale = this.parent.locale;\n        }\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', getComplexFieldID(args.column.field));\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.dropdownCreated = function (e) {\n        this.flag = true;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.obj.fields.value, true);\n        if (this.flag && this.column.dataSource) {\n            this.column.dataSource.dataSource.json = e.result;\n        }\n        this.flag = false;\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        if (this.parent.editSettings.mode === 'Dialog' && !isNullOrUndefined(dlgElement)) {\n            var dlgObj = document.querySelector('#' + dlgElement.id).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n"]},"metadata":{},"sourceType":"module"}