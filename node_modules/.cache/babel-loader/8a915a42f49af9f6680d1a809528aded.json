{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { EventHandler, remove, Browser, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat, applyBiggerTheme } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { parentsUntil, appendChildren, extend } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\n\nvar ExcelFilterBase =\n/** @class */\nfunction (_super) {\n  __extends(ExcelFilterBase, _super);\n  /**\n   * Constructor for excel filtering module\n   * @hidden\n   */\n\n\n  function ExcelFilterBase(parent, customFltrOperators) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.customFilterOperators = customFltrOperators;\n    _this.isExcel = true;\n    return _this;\n  }\n\n  ExcelFilterBase.prototype.getCMenuDS = function (type, operator) {\n    var options = {\n      number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan', 'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n      string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter']\n    };\n    options.date = options.number;\n    options.datetime = options.number;\n    var model = [];\n\n    for (var i = 0; i < options[type].length; i++) {\n      if (options[type][i].length) {\n        if (operator) {\n          model.push({\n            text: this.getLocalizedLabel(options[type][i]) + '...',\n            iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n          });\n        } else {\n          model.push({\n            text: this.getLocalizedLabel(options[type][i]) + '...'\n          });\n        }\n      } else {\n        model.push({\n          separator: true\n        });\n      }\n    }\n\n    return model;\n  };\n  /**\n   * To destroy the filter bar.\n   * @return {void}\n   * @hidden\n   */\n\n\n  ExcelFilterBase.prototype.destroy = function () {\n    if (this.dlg) {\n      this.unwireExEvents();\n\n      _super.prototype.destroy.call(this);\n    }\n\n    if (this.cmenu && this.cmenu.parentElement) {\n      remove(this.cmenu);\n    }\n  };\n\n  ExcelFilterBase.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n    var options = {\n      string: 'TextFilter',\n      date: 'DateFilter',\n      datetime: 'DateTimeFilter',\n      number: 'NumberFilter'\n    };\n    this.menu = this.parent.createElement('div', {\n      className: 'e-contextmenu-wrapper'\n    });\n\n    if (this.parent.enableRtl) {\n      this.menu.classList.add('e-rtl');\n    } else {\n      this.menu.classList.remove('e-rtl');\n    }\n\n    var ul = this.parent.createElement('ul');\n    var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n    ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n\n    if (type !== 'boolean') {\n      ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n    }\n\n    this.menu.appendChild(ul);\n    this.parent.notify(events.beforeFltrcMenuOpen, {\n      element: this.menu\n    });\n  };\n\n  ExcelFilterBase.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n    var li = this.parent.createElement('li', {\n      className: className + ' e-menu-item'\n    });\n    li.innerHTML = val;\n    li.insertBefore(this.parent.createElement('span', {\n      className: 'e-menu-icon e-icons ' + iconName\n    }), li.firstChild);\n\n    if (isSubMenu) {\n      li.appendChild(this.parent.createElement('span', {\n        className: 'e-icons e-caret'\n      }));\n    }\n\n    return li;\n  };\n\n  ExcelFilterBase.prototype.wireExEvents = function () {\n    EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n    EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n  };\n\n  ExcelFilterBase.prototype.unwireExEvents = function () {\n    EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n    EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n  };\n\n  ExcelFilterBase.prototype.clickExHandler = function (e) {\n    var menuItem = parentsUntil(e.target, 'e-menu-item');\n\n    if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n      this.clearFilter();\n      this.closeDialog();\n    }\n  };\n\n  ExcelFilterBase.prototype.destroyCMenu = function () {\n    if (this.menuObj && !this.menuObj.isDestroyed) {\n      this.menuObj.destroy();\n      remove(this.cmenu);\n    }\n  };\n\n  ExcelFilterBase.prototype.hoverHandler = function (e) {\n    var target = e.target.querySelector('.e-contextmenu');\n    var li = parentsUntil(e.target, 'e-menu-item');\n    var focused = this.menu.querySelector('.e-focused');\n    var isSubMenu;\n\n    if (focused) {\n      focused.classList.remove('e-focused');\n    }\n\n    if (li) {\n      li.classList.add('e-focused');\n      isSubMenu = li.classList.contains('e-submenu');\n    }\n\n    if (target) {\n      return;\n    }\n\n    if (!isSubMenu) {\n      var submenu = this.menu.querySelector('.e-submenu');\n\n      if (!isNullOrUndefined(submenu)) {\n        submenu.classList.remove('e-selected');\n      }\n\n      this.isCMenuOpen = false;\n      this.destroyCMenu();\n    }\n\n    var selectedMenu = this.ensureTextFilter();\n\n    if (!this.isCMenuOpen && isSubMenu) {\n      li.classList.add('e-selected');\n      this.isCMenuOpen = true;\n      var menuOptions = {\n        items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n        select: this.selectHandler.bind(this),\n        onClose: this.destroyCMenu.bind(this),\n        enableRtl: this.parent.enableRtl,\n        beforeClose: this.preventClose\n      };\n      this.parent.element.appendChild(this.cmenu);\n      this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n      var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n      var pos = {\n        top: 0,\n        left: 0\n      };\n\n      if (Browser.isDevice) {\n        var contextRect = this.getContextBounds(this.menuObj);\n        pos.top = (window.innerHeight - contextRect.height) / 2;\n        pos.left = (window.innerWidth - contextRect.width) / 2;\n        this.closeDialog();\n      } else {\n        pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n        pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n      }\n\n      this.menuObj.open(pos.top, pos.left, e.target);\n      applyBiggerTheme(this.parent.element, this.menuObj.element.parentElement);\n    }\n  };\n\n  ExcelFilterBase.prototype.ensureTextFilter = function () {\n    var selectedMenu;\n    var predicates = this.existingPredicate[this.options.field];\n\n    if (predicates && predicates.length === 2) {\n      if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n        selectedMenu = 'between';\n      } else {\n        selectedMenu = 'customfilter';\n      }\n    } else {\n      if (predicates && predicates.length === 1) {\n        this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n        selectedMenu = predicates[0].operator;\n      }\n    }\n\n    return selectedMenu;\n  };\n\n  ExcelFilterBase.prototype.preventClose = function (args) {\n    if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n      args.cancel = true;\n    }\n  };\n\n  ExcelFilterBase.prototype.getContextBounds = function (context) {\n    var elementVisible = this.menuObj.element.style.display;\n    this.menuObj.element.style.display = 'block';\n    return this.menuObj.element.getBoundingClientRect();\n  };\n\n  ExcelFilterBase.prototype.getCMenuYPosition = function (target, context) {\n    var contextWidth = this.getContextBounds(context).width;\n    var targetPosition = target.getBoundingClientRect();\n    var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n    var targetBorder = target.offsetWidth - target.clientWidth;\n    targetBorder = targetBorder ? targetBorder + 1 : 0;\n    return leftPos < 1 ? targetPosition.right + 1 - targetBorder : targetPosition.left - contextWidth - 1 + targetBorder;\n  };\n\n  ExcelFilterBase.prototype.openDialog = function (options) {\n    var _this = this;\n\n    this.updateModel(options);\n    this.getAndSetChkElem(options);\n    this.showDialog(options);\n    this.dialogObj.dataBind();\n    var filterLength = this.existingPredicate[options.field] && this.existingPredicate[options.field].length || this.options.filteredColumns.filter(function (col) {\n      return _this.options.field === col.field;\n    }).length;\n    this.createMenu(options.type, filterLength > 0, filterLength === 1 || filterLength === 2);\n    this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n    this.dlg.classList.add('e-excelfilter');\n    this.dlg.classList.remove('e-checkboxfilter');\n    this.cmenu = this.parent.createElement('ul', {\n      className: 'e-excel-menu'\n    });\n    this.wireExEvents();\n  };\n\n  ExcelFilterBase.prototype.closeDialog = function () {\n    _super.prototype.closeDialog.call(this);\n  };\n\n  ExcelFilterBase.prototype.selectHandler = function (e) {\n    if (e.item) {\n      this.menuItem = e.item;\n      this.renderDialogue(e);\n    }\n  };\n\n  ExcelFilterBase.prototype.renderDialogue = function (e) {\n    var _this = this;\n\n    var target = e.element;\n    var column = this.options.field;\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var mainDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-maindiv',\n      id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n    });\n    this.dlgDiv = this.parent.createElement('div', {\n      className: 'e-xlflmenu',\n      id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n    });\n    this.parent.element.appendChild(this.dlgDiv);\n    this.dlgObj = new Dialog({\n      header: this.getLocalizedLabel('CustomFilter'),\n      isModal: true,\n      overlayClick: this.removeDialog.bind(this),\n      showCloseIcon: true,\n      closeOnEscape: false,\n      target: document.body,\n      // target: this.parent.element,\n      visible: false,\n      enableRtl: this.parent.enableRtl,\n      open: function () {\n        var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n\n        if (_this.options.column.filterTemplate) {\n          if (isBlazor()) {\n            row.querySelector('.e-xlfl-valuediv').children[0].focus();\n          } else {\n            row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n          }\n        } else {\n          row.cells[1].querySelector('input:not([type=hidden])').focus();\n        }\n      },\n      close: this.removeDialog.bind(this),\n      created: this.createdDialog.bind(this, target, column),\n      buttons: [{\n        click: this.filterBtnClick.bind(this, column),\n        buttonModel: {\n          content: this.getLocalizedLabel('OKButton'),\n          isPrimary: true,\n          cssClass: 'e-xlfl-okbtn'\n        }\n      }, {\n        click: this.removeDialog.bind(this),\n        buttonModel: {\n          content: this.getLocalizedLabel('CancelButton'),\n          cssClass: 'e-xlfl-cancelbtn'\n        }\n      }],\n      content: mainDiv,\n      width: 430,\n      animationSettings: {\n        effect: 'None'\n      }\n    });\n    var isStringTemplate = 'isStringTemplate';\n    this.dlgObj[isStringTemplate] = true;\n    this.dlgDiv.setAttribute('aria-label', this.getLocalizedLabel('CustomFilterDialogARIA'));\n    this.dlgObj.appendTo(this.dlgDiv);\n  };\n\n  ExcelFilterBase.prototype.removeDialog = function () {\n    if (isBlazor()) {\n      var columns = this.options.columns || [];\n\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[i].filterTemplate) {\n          var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n          updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n        }\n      }\n    }\n\n    this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n    remove(this.dlgDiv);\n  };\n\n  ExcelFilterBase.prototype.createdDialog = function (target, column) {\n    this.renderCustomFilter(target, column);\n    this.dlgObj.element.style.left = '0px';\n    this.dlgObj.element.style.top = '0px';\n\n    if (Browser.isDevice && window.innerWidth < 440) {\n      this.dlgObj.element.style.width = '90%';\n    }\n\n    this.parent.notify(events.beforeCustomFilterOpen, {\n      column: column,\n      dialog: this.dialogObj\n    });\n    this.dlgObj.show();\n    applyBiggerTheme(this.parent.element, this.dlgObj.element.parentElement);\n  };\n\n  ExcelFilterBase.prototype.renderCustomFilter = function (target, column) {\n    var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n    /* tslint:disable-next-line:max-line-length */\n\n    var dlgFields = this.parent.createElement('div', {\n      innerHTML: this.getLocalizedLabel('ShowRowsWhere'),\n      className: 'e-xlfl-dlgfields'\n    });\n    dlgConetntEle.appendChild(dlgFields); //column name\n\n    var fieldSet = this.parent.createElement('div', {\n      innerHTML: this.options.displayName,\n      className: 'e-xlfl-fieldset'\n    });\n    dlgConetntEle.appendChild(fieldSet);\n    this.renderFilterUI(column, dlgConetntEle);\n  };\n\n  ExcelFilterBase.prototype.filterBtnClick = function (col) {\n    var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n    var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n    var colValue = isComplex ? complexFieldName : col;\n    var fValue = this.options.column.filterTemplate && isBlazor() ? this.dlgDiv.querySelector('.-xlfl-frstvalue').children[0].querySelector('.e-control').ej2_instances[0] : this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n    var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n    var sValue = this.options.column.filterTemplate && isBlazor() ? this.dlgDiv.querySelector('.-xlfl-secndvalue').children[0].querySelector('.e-control').ej2_instances[0] : this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n    var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n    var checkBoxValue;\n\n    if (this.options.type === 'string') {\n      var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n      checkBoxValue = checkBox.checked;\n    }\n\n    var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n    var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n    var predicate = andRadio.checked ? 'and' : 'or';\n\n    if (sValue.value === null) {\n      predicate = 'or';\n    }\n\n    this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.options.ignoreAccent, sOperator.value, sValue.value);\n    this.removeDialog();\n  };\n  /**\n   * @hidden\n   * Filters grid row by column name with given options.\n   * @param {string} fieldName - Defines the field name of the filter column.\n   * @param {string} firstOperator - Defines the first operator by how to filter records.\n   * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n   * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n   * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n   * filter records with case insensitive(uppercase and lowercase letters treated as same).\n   * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n   * @param {string} secondOperator - Defines the second operator by how to filter records.\n   * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n   */\n\n\n  ExcelFilterBase.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n    var col = this.parent.getColumnByField ? this.parent.getColumnByField(fieldName) : this.options.column;\n    var field = this.isForeignColumn(col) ? col.foreignKeyValue : fieldName;\n    var fColl = [];\n    var mPredicate;\n    fColl.push({\n      field: field,\n      predicate: predicate,\n      matchCase: matchCase,\n      ignoreAccent: ignoreAccent,\n      operator: firstOperator,\n      value: firstValue,\n      type: this.options.type\n    });\n    var arg = {\n      instance: this,\n      handler: this.filterByColumn,\n      arg1: fieldName,\n      arg2: firstOperator,\n      arg3: firstValue,\n      arg4: predicate,\n      arg5: matchCase,\n      arg6: ignoreAccent,\n      arg7: secondOperator,\n      arg8: secondValue,\n      cancel: false\n    };\n    this.parent.notify(events.fltrPrevent, arg);\n\n    if (arg.cancel) {\n      return;\n    }\n\n    mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n\n    if (!isNullOrUndefined(secondValue) && !isNullOrUndefined(secondOperator)) {\n      fColl.push({\n        field: field,\n        predicate: predicate,\n        matchCase: matchCase,\n        ignoreAccent: ignoreAccent,\n        operator: secondOperator,\n        value: secondValue,\n        type: this.options.type\n      });\n      /* tslint:disable-next-line:max-line-length */\n\n      mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n    }\n\n    var args = {\n      action: 'filtering',\n      filterCollection: fColl,\n      field: this.options.field,\n      ejpredicate: mPredicate,\n      actualPredicate: fColl\n    };\n\n    if (this.isForeignColumn(col)) {\n      this.foreignKeyFilter(args, fColl, mPredicate);\n    } else {\n      this.options.handler(args);\n    }\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n    var fieldElement = this.parent.createElement('tr', {\n      className: 'e-xlfl-fields'\n    });\n    table.appendChild(fieldElement);\n    var xlfloptr = this.parent.createElement('td', {\n      className: 'e-xlfl-optr'\n    });\n    fieldElement.appendChild(xlfloptr);\n    var optrDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-optrdiv'\n    });\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var optrInput = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + elementID : column + elementID\n    });\n    optrDiv.appendChild(optrInput);\n    xlfloptr.appendChild(optrDiv);\n    var optr = this.options.type + 'Operator';\n    var dropDatasource = this.customFilterOperators[optr];\n    this.optrData = dropDatasource;\n    var selectedValue = this.dropSelectedVal(this.options.column, predicates, isFirst); //Trailing three dots are sliced.\n\n    var menuText = '';\n\n    if (this.menuItem) {\n      menuText = this.menuItem.text.slice(0, -3);\n\n      if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n        selectedValue = isFirst ? menuText : undefined;\n      }\n\n      if (menuText === this.getLocalizedLabel('Between')) {\n        selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n      }\n    }\n\n    var col = this.options.column;\n    this.dropOptr = new DropDownList(extend({\n      dataSource: dropDatasource,\n      fields: {\n        text: 'text',\n        value: 'value'\n      },\n      text: selectedValue,\n      open: this.dropDownOpen.bind(this),\n      enableRtl: this.parent.enableRtl\n    }, col.filter.params));\n    this.dropOptr.appendTo(optrInput);\n    var operator = this.getSelectedValue(selectedValue);\n    return {\n      fieldElement: fieldElement,\n      operator: operator\n    };\n  };\n\n  ExcelFilterBase.prototype.dropDownOpen = function (args) {\n    args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n  };\n\n  ExcelFilterBase.prototype.getSelectedValue = function (text) {\n    var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n    return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n  };\n\n  ExcelFilterBase.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n    var operator;\n\n    if (predicates && predicates.length > 0) {\n      operator = predicates.length === 2 ? isFirst ? predicates[0].operator : predicates[1].operator : isFirst ? predicates[0].operator : undefined;\n    } else if (isFirst && col.type === 'string' && !col.filter.operator) {\n      operator = 'startswith';\n    } else {\n      operator = isFirst ? col.filter.operator || 'equal' : undefined;\n    }\n\n    return this.getSelectedText(operator);\n  };\n\n  ExcelFilterBase.prototype.getSelectedText = function (operator) {\n    var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n    return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n  };\n\n  ExcelFilterBase.prototype.renderFilterUI = function (column, dlgConetntEle) {\n    var predicates = this.existingPredicate[column];\n    var table = this.parent.createElement('table', {\n      className: 'e-xlfl-table'\n    });\n    dlgConetntEle.appendChild(table);\n    var colGroup = this.parent.createElement('colGroup');\n    colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n    table.appendChild(colGroup); //Renders first dropdown\n\n    /* tslint:disable-next-line:max-line-length */\n\n    var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true); //Renders first value\n\n    this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n    var predicate = this.parent.createElement('tr', {\n      className: 'e-xlfl-predicate'\n    });\n    table.appendChild(predicate); //Renders first radion button\n\n    this.renderRadioButton(column, predicate, predicates); //Renders second dropdown\n\n    optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false); //Renders second text box\n\n    this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n  };\n\n  ExcelFilterBase.prototype.renderRadioButton = function (column, tr, predicates) {\n    var td = this.parent.createElement('td', {\n      className: 'e-xlfl-radio',\n      attrs: {\n        'colSpan': '2'\n      }\n    });\n    tr.appendChild(td);\n    var radioDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-radiodiv',\n      attrs: {\n        'style': 'display: inline-block'\n      }\n    });\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    /* tslint:disable-next-line:max-line-length */\n\n    var frstpredicate = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate',\n      attrs: {\n        'type': 'radio'\n      }\n    });\n    /* tslint:disable-next-line:max-line-length */\n\n    var secndpredicate = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate',\n      attrs: {\n        'type': 'radio'\n      }\n    }); //appends into div\n\n    radioDiv.appendChild(frstpredicate);\n    radioDiv.appendChild(secndpredicate);\n    td.appendChild(radioDiv);\n\n    if (this.options.type === 'string') {\n      this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n    } // Initialize AND RadioButton component.\n\n    /* tslint:disable-next-line:max-line-length */\n\n\n    var andRadio = new RadioButton({\n      label: this.getLocalizedLabel('AND'),\n      name: 'default',\n      cssClass: 'e-xlfl-radio-and',\n      checked: true,\n      enableRtl: this.parent.enableRtl\n    }); // Initialize OR RadioButton component.\n\n    /* tslint:disable-next-line:max-line-length */\n\n    var orRadio = new RadioButton({\n      label: this.getLocalizedLabel('OR'),\n      name: 'default',\n      cssClass: 'e-xlfl-radio-or',\n      enableRtl: this.parent.enableRtl\n    });\n    var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n\n    if (flValue === 'and') {\n      andRadio.checked = true;\n      orRadio.checked = false;\n    } else {\n      orRadio.checked = true;\n      andRadio.checked = false;\n    } // Render initialized RadioButton.\n\n\n    andRadio.appendTo(frstpredicate);\n    orRadio.appendTo(secndpredicate);\n  };\n  /* tslint:disable-next-line:no-any */\n\n\n  ExcelFilterBase.prototype.removeObjects = function (elements) {\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n      var obj = elements_1[_i];\n\n      if (obj && !obj.isDestroyed) {\n        obj.destroy();\n      }\n    }\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n    var value = this.parent.createElement('td', {\n      className: 'e-xlfl-value'\n    });\n    optr.fieldElement.appendChild(value);\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var valueDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-valuediv'\n    });\n    var isFilteredCol = this.options.filteredColumns.some(function (col) {\n      return column === col.field;\n    });\n    var fltrPredicates = this.options.filteredColumns.filter(function (col) {\n      return col.field === column;\n    });\n\n    if (this.options.column.filterTemplate) {\n      var data = {};\n      var columnObj = this.options.column;\n\n      if (isFilteredCol && elementId) {\n        data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n      }\n\n      var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n      var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n      appendChildren(valueDiv, element);\n\n      if (isBlazor()) {\n        valueDiv.children[0].classList.add(elementId);\n\n        if (this.dlgDiv.querySelectorAll('.e-xlfl-value').length > 1) {\n          updateBlazorTemplate(tempID, 'FilterTemplate', columnObj);\n        }\n      } else {\n        valueDiv.children[0].id = isComplex ? complexFieldName + elementId : column + elementId;\n      }\n\n      value.appendChild(valueDiv);\n    } else {\n      var valueInput = this.parent.createElement('input', {\n        id: isComplex ? complexFieldName + elementId : column + elementId\n      });\n      valueDiv.appendChild(valueInput);\n      value.appendChild(valueDiv);\n      var flValue = void 0;\n      var predicate = void 0;\n\n      if (predicates && predicates.length > 0) {\n        predicate = predicates.length === 2 ? isFirst ? predicates[0] : predicates[1] : isFirst ? predicates[0] : undefined;\n        flValue = predicate && predicate.operator === optr.operator ? predicate.value : undefined;\n      }\n\n      var types = {\n        'string': this.renderAutoComplete.bind(this),\n        'number': this.renderNumericTextBox.bind(this),\n        'date': this.renderDate.bind(this),\n        'datetime': this.renderDateTime.bind(this)\n      };\n      types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n    }\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n    var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n\n    if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n      data = {\n        column: predicates instanceof Array ? predicates[predIndex] : predicates\n      };\n      var indx = this.options.column.columnData && fltrPredicates.length > 1 ? this.options.column.columnData.length === 1 ? 0 : 1 : predIndex;\n      data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] : fltrPredicates[indx].value;\n\n      if (this.options.foreignKeyValue) {\n        data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n      }\n    }\n\n    return data;\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n    /* tslint:disable-next-line:max-line-length */\n    var matchCaseDiv = this.parent.createElement('div', {\n      className: 'e-xlfl-matchcasediv',\n      attrs: {\n        'style': 'display: inline-block'\n      }\n    });\n    var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n    var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n    var matchCaseInput = this.parent.createElement('input', {\n      id: isComplex ? complexFieldName + elementId : column + elementId,\n      attrs: {\n        'type': 'checkbox'\n      }\n    });\n    matchCaseDiv.appendChild(matchCaseInput);\n    matchCase.appendChild(matchCaseDiv);\n    var flValue = predicates && predicates.length > 0 ? predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase : false; // Initialize Match Case check box.\n\n    var checkbox = new CheckBox({\n      label: this.getLocalizedLabel('MatchCase'),\n      enableRtl: this.parent.enableRtl,\n      checked: flValue\n    }); // Render initialized CheckBox.\n\n    checkbox.appendTo(matchCaseInput);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n    var format = getCustomDateFormat(options.format, options.type);\n    this.datePicker = new DatePicker(extend({\n      format: format,\n      cssClass: 'e-popup-flmenu',\n      placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n      width: '100%',\n      enableRtl: isRtl,\n      value: new Date(fValue)\n    }, options.column.filter.params));\n    this.datePicker.appendTo(inputValue);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n    var format = getCustomDateFormat(options.format, options.type);\n    this.dateTimePicker = new DateTimePicker(extend({\n      format: format,\n      cssClass: 'e-popup-flmenu',\n      placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n      width: '100%',\n      enableRtl: isRtl,\n      value: new Date(fValue)\n    }, options.column.filter.params));\n    this.dateTimePicker.appendTo(inputValue);\n  };\n\n  ExcelFilterBase.prototype.completeAction = function (e) {\n    e.result = distinctStringValues(e.result);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n    this.numericTxtObj = new NumericTextBox(extend({\n      format: options.format,\n      placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n      enableRtl: isRtl,\n      value: fValue\n    }, options.column.filter.params));\n    this.numericTxtObj.appendTo(inputValue);\n  };\n  /* tslint:disable-next-line:max-line-length */\n\n\n  ExcelFilterBase.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n    var _this = this;\n\n    var colObj = this.options.column;\n    var isForeignColumn = this.isForeignColumn(colObj);\n    var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n    var fields = {\n      value: isForeignColumn ? colObj.foreignKeyValue : column\n    };\n    var actObj = new AutoComplete(extend({\n      dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n      fields: fields,\n      query: this.getQuery(),\n      sortOrder: 'Ascending',\n      locale: this.parent.locale,\n      cssClass: 'e-popup-flmenu',\n      autofill: true,\n      focus: function () {\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var columnvalue = isComplex ? complexFieldName : column;\n        actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue + (inputValue.id === columnvalue + '-xlfl-frstvalue' ? '-xlfl-frstoptr' : '-xlfl-secndoptr')).ej2_instances[0].value;\n        actObj.ignoreCase = options.type === 'string' ? !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked : true;\n        actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType : 'equal';\n      },\n      placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n      enableRtl: isRtl,\n      actionComplete: function (e) {\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        e.result = e.result.filter(function (obj, index, arr) {\n          return arr.map(function (mapObject) {\n            return isComplex ? _this.performComplexDataOperation(actObj.fields.value, mapObject) : mapObject[actObj.fields.value];\n          }).indexOf(isComplex ? _this.performComplexDataOperation(actObj.fields.value, obj) : obj[_this.actObj.fields.value]) === index;\n        });\n      },\n      value: fValue\n    }, colObj.filter.params));\n    actObj.appendTo(inputValue);\n    this.actObj = actObj;\n  };\n\n  ExcelFilterBase.prototype.performComplexDataOperation = function (value, mapObject) {\n    var returnObj;\n    var length = value.split('.').length;\n    var splits = value.split('.');\n    var duplicateMap = mapObject;\n\n    for (var i = 0; i < length; i++) {\n      returnObj = duplicateMap[splits[i]];\n      duplicateMap = returnObj;\n    }\n\n    return returnObj;\n  };\n\n  return ExcelFilterBase;\n}(CheckBoxFilterBase);\n\nexport { ExcelFilterBase };","map":{"version":3,"sources":["C:/CN2/workspace-trunk/kain-front-end/node_modules/@syncfusion/ej2-grids/src/grid/common/excel-filter-base.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","EventHandler","remove","Browser","isBlazor","updateBlazorTemplate","isNullOrUndefined","Query","DataManager","Predicate","Dialog","DropDownList","AutoComplete","NumericTextBox","RadioButton","CheckBox","distinctStringValues","isComplexField","getComplexFieldID","getCustomDateFormat","applyBiggerTheme","DatePicker","DateTimePicker","parentsUntil","appendChildren","extend","events","ContextMenu","CheckBoxFilterBase","ExcelFilterBase","_super","parent","customFltrOperators","_this","call","customFilterOperators","isExcel","getCMenuDS","type","operator","options","number","string","date","datetime","model","i","length","push","text","getLocalizedLabel","iconCss","toLowerCase","separator","destroy","dlg","unwireExEvents","cmenu","parentElement","createMenu","isFiltered","isCheckIcon","menu","createElement","className","enableRtl","classList","add","ul","icon","appendChild","createMenuElem","ensureTextFilter","notify","beforeFltrcMenuOpen","element","val","iconName","isSubMenu","li","innerHTML","insertBefore","firstChild","wireExEvents","hoverHandler","clickExHandler","e","menuItem","target","innerText","trim","clearFilter","closeDialog","destroyCMenu","menuObj","isDestroyed","querySelector","focused","contains","submenu","isCMenuOpen","selectedMenu","menuOptions","items","replace","undefined","select","selectHandler","bind","onClose","beforeClose","preventClose","client","getBoundingClientRect","pos","top","left","isDevice","contextRect","getContextBounds","window","innerHeight","height","innerWidth","width","isIE","pageYOffset","scrollY","getCMenuYPosition","open","predicates","existingPredicate","field","optrData","args","event","MouseEvent","cancel","context","elementVisible","style","display","contextWidth","targetPosition","leftPos","right","clientWidth","targetBorder","offsetWidth","openDialog","updateModel","getAndSetChkElem","showDialog","dialogObj","dataBind","filterLength","filteredColumns","filter","col","item","renderDialogue","column","isComplex","complexFieldName","mainDiv","id","dlgDiv","dlgObj","header","isModal","overlayClick","removeDialog","showCloseIcon","closeOnEscape","document","body","visible","row","filterTemplate","children","focus","cells","close","created","createdDialog","buttons","click","filterBtnClick","buttonModel","content","isPrimary","cssClass","animationSettings","effect","isStringTemplate","setAttribute","appendTo","columns","tempID","uid","removeObjects","dropOptr","datePicker","dateTimePicker","actObj","numericTxtObj","renderCustomFilter","beforeCustomFilterOpen","dialog","show","dlgConetntEle","dlgFields","fieldSet","displayName","renderFilterUI","colValue","fValue","ej2_instances","fOperator","sValue","sOperator","checkBoxValue","checkBox","checked","andRadio","orRadio","predicate","value","filterByColumn","ignoreAccent","fieldName","firstOperator","firstValue","matchCase","secondOperator","secondValue","getColumnByField","isForeignColumn","foreignKeyValue","fColl","mPredicate","arg","instance","handler","arg1","arg2","arg3","arg4","arg5","arg6","arg7","arg8","fltrPrevent","action","filterCollection","ejpredicate","actualPredicate","foreignKeyFilter","renderOperatorUI","table","elementID","isFirst","fieldElement","xlfloptr","optrDiv","optrInput","optr","dropDatasource","selectedValue","dropSelectedVal","menuText","slice","dataSource","fields","dropDownOpen","params","getSelectedValue","popup","zIndex","toString","selectedField","executeLocal","where","getSelectedText","colGroup","renderFlValueUI","renderRadioButton","tr","td","attrs","radioDiv","frstpredicate","secndpredicate","renderMatchCase","label","name","flValue","elements","_i","elements_1","obj","elementId","valueDiv","isFilteredCol","some","fltrPredicates","data","columnObj","getExcelFilterData","getFilterTemplate","querySelectorAll","valueInput","types","renderAutoComplete","renderNumericTextBox","renderDate","renderDateTime","predIndex","indx","columnData","matchCaseDiv","matchCaseInput","checkbox","inputValue","isRtl","format","placeholder","Date","completeAction","result","colObj","query","getQuery","sortOrder","locale","autofill","columnvalue","filterType","ignoreCase","actionComplete","index","arr","map","mapObject","performComplexDataOperation","indexOf","returnObj","split","splits","duplicateMap"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser, isBlazor, updateBlazorTemplate } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID, getCustomDateFormat, applyBiggerTheme } from '../base/util';\nimport { DatePicker, DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { parentsUntil, appendChildren, extend } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilterBase } from '../common/checkbox-filter-base';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilterBase = /** @class */ (function (_super) {\n    __extends(ExcelFilterBase, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilterBase(parent, customFltrOperators) {\n        var _this = _super.call(this, parent) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilterBase.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilterBase.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilterBase.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateTimeFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n        this.parent.notify(events.beforeFltrcMenuOpen, { element: this.menu });\n    };\n    ExcelFilterBase.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilterBase.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilterBase.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilterBase.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilterBase.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilterBase.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = Browser.isIE ? window.pageYOffset + client.top : window.scrollY + client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left, e.target);\n            applyBiggerTheme(this.parent.element, this.menuObj.element.parentElement);\n        }\n    };\n    ExcelFilterBase.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterthanorequal' && predicates[1].operator === 'lessthanorequal') {\n                selectedMenu = 'between';\n            }\n            else {\n                selectedMenu = 'customfilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilterBase.prototype.preventClose = function (args) {\n        if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n            args.cancel = true;\n        }\n    };\n    ExcelFilterBase.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilterBase.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        var targetBorder = target.offsetWidth - target.clientWidth;\n        targetBorder = targetBorder ? targetBorder + 1 : 0;\n        return (leftPos < 1) ? (targetPosition.right + 1 - targetBorder) : (targetPosition.left - contextWidth - 1 + targetBorder);\n    };\n    ExcelFilterBase.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2));\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilterBase.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilterBase.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilterBase.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e.element;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                if (_this.options.column.filterTemplate) {\n                    if (isBlazor()) {\n                        row.querySelector('.e-xlfl-valuediv').children[0].focus();\n                    }\n                    else {\n                        row.querySelector('#' + _this.options.column.field + '-xlfl-frstvalue').focus();\n                    }\n                }\n                else {\n                    row.cells[1].querySelector('input:not([type=hidden])').focus();\n                }\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        var isStringTemplate = 'isStringTemplate';\n        this.dlgObj[isStringTemplate] = true;\n        this.dlgDiv.setAttribute('aria-label', this.getLocalizedLabel('CustomFilterDialogARIA'));\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilterBase.prototype.removeDialog = function () {\n        if (isBlazor()) {\n            var columns = this.options.columns || [];\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].filterTemplate) {\n                    var tempID = this.parent.element.id + columns[i].uid + 'filterTemplate';\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columns[i]);\n                }\n            }\n        }\n        this.removeObjects([this.dropOptr, this.datePicker, this.dateTimePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilterBase.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        if (Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.parent.notify(events.beforeCustomFilterOpen, { column: column, dialog: this.dialogObj });\n        this.dlgObj.show();\n        applyBiggerTheme(this.parent.element, this.dlgObj.element.parentElement);\n    };\n    ExcelFilterBase.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilterBase.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.options.column.filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-frstvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.options.column.filterTemplate && isBlazor() ?\n            this.dlgDiv.querySelector('.-xlfl-secndvalue').children[0].querySelector('.e-control').ej2_instances[0]\n            : this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.options.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * @hidden\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilterBase.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var col = this.parent.getColumnByField ? this.parent.getColumnByField(fieldName) : this.options.column;\n        var field = this.isForeignColumn(col) ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        var arg = {\n            instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n            arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue, cancel: false\n        };\n        this.parent.notify(events.fltrPrevent, arg);\n        if (arg.cancel) {\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (!isNullOrUndefined(secondValue) && !isNullOrUndefined(secondOperator)) {\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /* tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        if (this.isForeignColumn(col)) {\n            this.foreignKeyFilter(args, fColl, mPredicate);\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(this.options.column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        var col = this.options.column;\n        this.dropOptr = new DropDownList(extend({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl\n        }, col.filter.params));\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilterBase.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilterBase.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilterBase.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else if (isFirst && col.type === 'string' && !col.filter.operator) {\n            operator = 'startswith';\n        }\n        else {\n            operator = isFirst ? col.filter.operator || 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilterBase.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilterBase.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /* tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilterBase.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilterBase.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var isFilteredCol = this.options.filteredColumns.some(function (col) { return column === col.field; });\n        var fltrPredicates = this.options.filteredColumns.filter(function (col) { return col.field === column; });\n        if (this.options.column.filterTemplate) {\n            var data = {};\n            var columnObj = this.options.column;\n            if (isFilteredCol && elementId) {\n                data = this.getExcelFilterData(elementId, data, columnObj, predicates, fltrPredicates);\n            }\n            var tempID = this.parent.element.id + columnObj.uid + 'filterTemplate';\n            var element = this.options.column.getFilterTemplate()(data, this.parent, 'filterTemplate', tempID);\n            appendChildren(valueDiv, element);\n            if (isBlazor()) {\n                valueDiv.children[0].classList.add(elementId);\n                if (this.dlgDiv.querySelectorAll('.e-xlfl-value').length > 1) {\n                    updateBlazorTemplate(tempID, 'FilterTemplate', columnObj);\n                }\n            }\n            else {\n                valueDiv.children[0].id = isComplex ? complexFieldName + elementId : column + elementId;\n            }\n            value.appendChild(valueDiv);\n        }\n        else {\n            var valueInput = this.parent\n                .createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n            valueDiv.appendChild(valueInput);\n            value.appendChild(valueDiv);\n            var flValue = void 0;\n            var predicate = void 0;\n            if (predicates && predicates.length > 0) {\n                predicate = predicates.length === 2 ?\n                    (isFirst ? predicates[0] : predicates[1]) :\n                    (isFirst ? predicates[0] : undefined);\n                flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n            }\n            var types = {\n                'string': this.renderAutoComplete.bind(this),\n                'number': this.renderNumericTextBox.bind(this),\n                'date': this.renderDate.bind(this),\n                'datetime': this.renderDateTime.bind(this)\n            };\n            types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.getExcelFilterData = function (elementId, data, columnObj, predicates, fltrPredicates) {\n        var predIndex = elementId === '-xlfl-frstvalue' ? 0 : 1;\n        if (elementId === '-xlfl-frstvalue' || fltrPredicates.length > 1) {\n            data = { column: predicates instanceof Array ? predicates[predIndex] : predicates };\n            var indx = this.options.column.columnData && fltrPredicates.length > 1 ?\n                (this.options.column.columnData.length === 1 ? 0 : 1) : predIndex;\n            data[this.options.field] = columnObj.foreignKeyValue ? this.options.column.columnData[indx][columnObj.foreignKeyValue] :\n                fltrPredicates[indx].value;\n            if (this.options.foreignKeyValue) {\n                data[this.options.foreignKeyValue] = this.options.column.columnData[indx][columnObj.foreignKeyValue];\n            }\n        }\n        return data;\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /* tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.datePicker = new DatePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        }, options.column.filter.params));\n        this.datePicker.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderDateTime = function (options, column, inputValue, fValue, isRtl) {\n        var format = getCustomDateFormat(options.format, options.type);\n        this.dateTimePicker = new DateTimePicker(extend({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        }, options.column.filter.params));\n        this.dateTimePicker.appendTo(inputValue);\n    };\n    ExcelFilterBase.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox(extend({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue\n        }, options.column.filter.params));\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /* tslint:disable-next-line:max-line-length */\n    ExcelFilterBase.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.options.column;\n        var isForeignColumn = this.isForeignColumn(colObj);\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete(extend({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.getQuery(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return isComplex ? _this.performComplexDataOperation(actObj.fields.value, mapObject)\n                            : mapObject[actObj.fields.value];\n                    }).indexOf(isComplex ? _this.performComplexDataOperation(actObj.fields.value, obj) :\n                        obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            value: fValue\n        }, colObj.filter.params));\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    ExcelFilterBase.prototype.performComplexDataOperation = function (value, mapObject) {\n        var returnObj;\n        var length = value.split('.').length;\n        var splits = value.split('.');\n        var duplicateMap = mapObject;\n        for (var i = 0; i < length; i++) {\n            returnObj = duplicateMap[splits[i]];\n            duplicateMap = returnObj;\n        }\n        return returnObj;\n    };\n    return ExcelFilterBase;\n}(CheckBoxFilterBase));\nexport { ExcelFilterBase };\n"]},"metadata":{},"sourceType":"module"}